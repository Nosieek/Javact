"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4078],{28512:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(39324),a=t(22830),i=t(4337),o=t(35250),s=t(70079),c=t(1454),u=t(94968),l=t(32004),d=t(21389),f=t(19012);function p(){var e=(0,i._)(["flex ml-auto gap-2"]);return p=function(){return e},e}var h=(0,u.vU)({copied:{id:"CopyButton.copied",defaultMessage:"Copied!",description:"Text displayed when the content has been copied"}});function m(e){var n=e.buttonText,t=e.onCopy,i=e.className,u=(0,a._)((0,s.useState)(!1),2),d=u[0],p=u[1],m=(0,f.Z)(),v=(0,s.useCallback)(function(e){e.stopPropagation(),t(),p(!0),setTimeout(function(){m()&&p(!1)},2e3)},[m,t]);return(0,o.jsxs)(o.Fragment,{children:[!d&&(0,o.jsxs)(g,{onClick:v,className:i,children:[(0,o.jsx)(c.j4u,{className:"icon-sm"}),n]}),d&&(0,o.jsxs)(g,{className:i,children:[(0,o.jsx)(c.UgA,{className:"icon-sm"}),n&&(0,o.jsx)(l.Z,(0,r._)({},h.copied))]})]})}var g=d.Z.button(p())},51973:function(e,n,t){var r=t(39324),a=t(22830),i=t(4337),o=t(35250),s=t(19841),c=t(70079),u=t(21389);function l(){var e=(0,i._)(["absolute right-0 top-1/2 -translate-y-1/2"]);return l=function(){return e},e}n.Z=c.forwardRef(function(e,n){var t=e.name,i=e.placeholder,u=e.type,l=e.displayName,f=e.onChange,p=e.onBlur,h=e.value,m=e.saveOnBlur,g=e.icon,v=e.onInputIconClick,x=e.className,b=e.autoComplete,y=e.autoFocus,_=e.onPressEnter,w=(0,a._)((0,c.useState)(h),2),j=w[0],k=w[1],P=(0,c.useCallback)(function(e){null==p||p(e),m&&k(e.target.value)},[p,m]),N=(0,c.useCallback)(function(e){null==f||f(e),m&&k(e.target.value)},[f,m]),C=(0,c.useCallback)(function(e){"Enter"===e.key&&_&&(e.preventDefault(),_())},[_]);(0,c.useEffect)(function(){k(h)},[h]);var S=(0,r._)({},m?{}:{value:h},m?{value:j}:{});return(0,o.jsxs)("div",{className:(0,s.default)("rounded-md border border-gray-300 px-3 py-2 shadow-sm focus-within:border-indigo-600 focus-within:ring-1 focus-within:ring-indigo-600 dark:bg-gray-700",x),children:[(0,o.jsx)("label",{htmlFor:t,className:"block text-xs font-medium text-gray-900 dark:text-gray-100",children:l}),(0,o.jsxs)("div",{className:(0,s.default)(l&&"mt-1","relative"),children:[(0,o.jsx)("input",(0,r._)({ref:n,type:u,name:t,id:t,className:(0,s.default)("block w-full border-0 p-0 text-gray-900 placeholder-gray-500 outline-none focus:ring-0 dark:bg-gray-700 dark:text-gray-100 sm:text-sm",null!=g&&"pr-6"),placeholder:i,onBlur:P,onChange:N,onKeyDown:C,autoComplete:b,autoFocus:y},S)),null!=g&&(0,o.jsx)(d,{onClick:v,children:(0,o.jsx)(g,{className:"icon-sm"})})]})]})});var d=u.Z.button(l())},31486:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35250),a=t(91809);function i(e){var n=e.plugin,t=n.manifest.name_for_human;return(0,r.jsxs)("div",{className:"flex gap-4 rounded bg-gray-50 px-4 py-2 dark:bg-gray-800",children:[(0,r.jsx)(a.Z,{url:n.manifest.logo_url,name:t,size:32,className:"flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h2",{className:"align-top text-base font-medium",children:t}),(0,r.jsx)("div",{className:"text-sm",children:n.manifest.description_for_human})]})]})}},48759:function(e,n,t){t.d(n,{bf:function(){return d},q6:function(){return l},rC:function(){return u}});var r=t(39324),a=t(70216),i=t(22830),o=t(35250),s=t(70079),c=t(1454);function u(e){var n=e.manifestValidationInfo,t=(0,a._)(e,["manifestValidationInfo"]),i=n.manifest_dict,s=n.warnings,c=n.errors;return(0,o.jsx)(f,(0,r._)({name:"manifest",content:i,warnings:s,errors:c},t))}function l(e){var n=e.apiValidationInfo,t=(0,a._)(e,["apiValidationInfo"]),i=n.openapi_spec_dict,s=n.warnings,c=n.errors;return(0,o.jsx)(f,(0,r._)({name:"OpenAPI spec",content:i,warnings:s,errors:c},t))}function d(e){var n=e.apiValidationInfo,t=(0,a._)(e,["apiValidationInfo"]),i=n.api_typescript;return i?(0,o.jsx)(p,(0,r._)({text:"Prompt for ChatGPT",content:i},t)):null}function f(e){var n=e.name,t=e.content,i=e.warnings,s=e.errors,u=(0,a._)(e,["name","content","warnings","errors"]),l=i&&i.length>0,d=s&&s.length>0,f="Validated ".concat(n),h=(0,o.jsx)(c.UgA,{className:"icon-sm text-green-500"});return d?(f="Errors in ".concat(n),h=(0,o.jsx)(c.q5L,{className:"icon-sm text-red-500"})):l&&(f="Warnings in ".concat(n),h=(0,o.jsx)(c.bcx,{className:"icon-sm  text-yellow-500"})),(0,o.jsx)(p,(0,r._)({icon:h,text:f,content:t,warnings:i,errors:s},u))}function p(e){var n=e.icon,t=e.text,r=e.content,a=e.warnings,u=e.errors,l=e.expanded,d=e.onChangeExpanded,f=(0,i._)((0,s.useState)(!1),2),p=f[0],h=f[1],m=null!=l?l:p,g=(0,s.useCallback)(function(){d?d(!m):h(function(e){return!e})},[m,d]);return(0,o.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[n&&(0,o.jsx)("div",{children:n}),(0,o.jsx)("div",{children:t}),(0,o.jsx)("div",{role:"button",className:"cursor-pointer text-gray-500 hover:text-gray-700",onClick:g,children:m?(0,o.jsx)(c.rH8,{className:"icon-sm"}):(0,o.jsx)(c.bTu,{className:"icon-sm"})})]}),m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col gap-2 font-semibold",children:[u&&u.map(function(e,n){return(0,o.jsx)("div",{className:"text-red-500",children:e},n)}),a&&a.map(function(e,n){return(0,o.jsx)("div",{className:"text-yellow-500",children:e},n)})]}),r&&(0,o.jsx)("pre",{className:"overflow-auto whitespace-pre-wrap text-xs",children:"string"==typeof r?r:JSON.stringify(r,null,2)})]})]})}},15608:function(e,n,t){t.d(n,{$L:function(){return b},Bb:function(){return x},U$:function(){return g},Up:function(){return y},nT:function(){return w},qo:function(){return v},sd:function(){return j}});var r=t(21722),a=t(39324),i=t(71209),o=t(22830),s=t(81949),c=t(75883),u=t(13995),l=t(74686),d=t(70079),f=t(68053),p=t(73908),h=t(35101),m=t(14444);function g(e){var n=e.onSuccess,t=e.onError,r=e.onSettled,a=(0,u.NL)(),i=(0,l.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){x(e,a),b(e,a),n(e)},onError:t,onSettled:r}).mutate;return(0,d.useCallback)(function(e){i({pluginId:e,isInstalled:!0})},[i])}function v(e){var n=e.onSuccess,t=e.onError,r=e.onSettled,a=(0,u.NL)(),i=(0,l.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){(function(e,n){var t=m.Z;n.setQueryData(t,function(n){var t=(0,s._)((null==n?void 0:n.items)||[]),r=t.findIndex(function(n){return n.id===e.id});return -1!==r&&t.splice(r,1),{count:t.length,items:t}})})(e,a),b(e,a),n(e)},onError:t,onSettled:r}).mutate;return(0,d.useCallback)(function(e){i({pluginId:e,isInstalled:!1})},[i])}function x(e,n){var t=m.Z;n.setQueryData(t,function(n){var t=(0,s._)((null==n?void 0:n.items)||[]),r=t.findIndex(function(n){return n.id===e.id});return -1!==r?t[r]=e:t.push(e),{count:t.length,items:t}})}function b(e,n){var t=h.V;n.setQueriesData(t,function(n){if(!n)return n;var t=n.items.findIndex(function(n){return n.id===e.id});if(-1===t)return n;var r=(0,s._)(n.items);return r[t]=e,(0,i._)((0,a._)({},n),{items:r})})}function y(e,n){return _.apply(this,arguments)}function _(){return(_=(0,r._)(function(e,n){var t,r;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return t="".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),[4,f.ZP.pluginOauthRedirect(e.id,t,n)];case 1:return r=a.sent(),window.location.href=r.redirect_uri,[2]}})})).apply(this,arguments)}function w(e){var n=e.manifest.auth;if("oauth"!==n.type||!e.oauth_client_id)return null;var t=new URLSearchParams({response_type:"code",client_id:e.oauth_client_id,redirect_uri:"".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),scope:n.scope});return n.client_url.includes("slack.com")&&(t.delete("scope"),t.append("user_scope",n.scope)),"".concat(n.client_url,"?").concat(t)}function j(){var e,n=(0,o._)((0,d.useState)(!1),2),t=n[0],a=n[1];return{fetchManifestAndSpec:(0,d.useCallback)((e=(0,r._)(function(e){var n,t,r,i,o,s,u,l,d;return(0,c.Jh)(this,function(c){switch(c.label){case 0:n=e.domain,t=e.manifestAccessToken,r=e.onSuccess,i=e.onError,o=(0,p.NB)(n),c.label=1;case 1:if(c.trys.push([1,10,11,12]),a(!0),!(null!=o))return[3,3];return[4,(0,p.Zb)(o)];case 2:if(void 0===(s=c.sent()))return[2];return r({domain:o,scrapeManifestResponse:{plugin:s.plugin,manifest_validation_info:s.manifest_validation_info},apiValidationInfo:s.api_validation_info}),[3,9];case 3:return[4,f.ZP.scrapePluginManifest({domain:n,manifestAccessToken:t})];case 4:if(!(u=c.sent()).plugin)return[3,8];c.label=5;case 5:return c.trys.push([5,7,,8]),[4,f.ZP.getPluginApi({id:u.plugin.id})];case 6:return l=c.sent().api_validation_info,[3,8];case 7:return c.sent(),[3,8];case 8:r({domain:n,scrapeManifestResponse:u,apiValidationInfo:l,manifestAccessToken:t}),c.label=9;case 9:return[3,12];case 10:return d=c.sent(),i(null!=o?d:void 0),[3,12];case 11:return a(!1),[7];case 12:return[2]}})}),function(n){return e.apply(this,arguments)}),[]),isLoading:t}}},73908:function(e,n,t){t.d(n,{NB:function(){return g},Zb:function(){return v},cf:function(){return m},qZ:function(){return f},wR:function(){return d}});var r=t(21722),a=t(39324),i=t(75883),o=t(8844),s=t(1703),c=t(95954),u=t(68053),l=t(88798);function d(e){var n,t,r,a,i=null!==(a=null===(n=e.metadata)||void 0===n?void 0:null===(t=n.invoked_plugin)||void 0===t?void 0:t.http_api_call_data)&&void 0!==a?a:null===(r=e.metadata)||void 0===r?void 0:r.http_api_call_data;if(void 0!==i){if(e.author.role!==c.uU.Assistant){console.error("Refusing to make localhost plugin HTTP call from non-assistant message",e);return}if("object"!=typeof i||"string"!=typeof i.namespace||0===i.namespace.length||"string"!=typeof i.function_name||0===i.function_name.length||"string"!=typeof i.parent_message_id||0===i.parent_message_id.length||"string"!=typeof i.url||0===i.url.length||"string"!=typeof i.method||!["get","post","put","delete","patch"].includes(i.method)||!Array.isArray(i.qs_params)||i.qs_params.some(function(e){return!Array.isArray(e)||2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1]})||"object"!=typeof i.headers||Object.keys(i.headers).some(function(e){return"string"!=typeof e})||Object.values(i.headers).some(function(e){return"string"!=typeof e})||!(null===i.body||"object"==typeof i.body&&Object.keys(i.body).every(function(e){return"string"==typeof e}))||"string"!=typeof i.api_function_type||!["kwargs","chat"].includes(i.api_function_type)){console.error("Refusing to make localhost plugin HTTP call with invalid metadata",e);return}if(!/^https?:\/\/localhost:/.test(i.url)){console.error("Refusing to make localhost plugin HTTP call with non-localhost URL",e);return}return i}}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(e){return h.apply(this,arguments)}(e)];case 1:return[2,t.sent()];case 2:return console.error("Error making localhost plugin HTTP call",n=t.sent()),[2,[{id:(0,o.Z)(),author:{role:c.uU.Tool,name:"plugin_service"},content:{content_type:c.PX.Text,parts:["Error making localhost plugin HTTP call: ".concat(n)]},recipient:"all"}]];case 3:return[2]}})})).apply(this,arguments)}function h(){return(h=(0,r._)(function(e){var n,t,r,s;function u(e){return Object.keys(e).map(function(e){return e.toLowerCase()})}return(0,i.Jh)(this,function(i){switch(i.label){case 0:var l;if(n={"content-type":"application/json"},l=[u(e.headers),u(n)].flat(),new Set(l).size!==l.length)throw Error("Refusing to make localhost plugin HTTP call with duplicate header keys");return t=e.url,e.qs_params.length>0&&(t=t+"?"+new URLSearchParams(e.qs_params)),r=void 0,null!==e.body&&(r=JSON.stringify(e.body)),[4,fetch(t,{method:e.method,headers:(0,a._)({},n,e.headers),body:r})];case 1:return[4,i.sent().text()];case 2:if(s=i.sent(),"chat"===e.api_function_type)return[2,[JSON.parse(s)]];if("kwargs"===e.api_function_type)return[2,[{id:(0,o.Z)(),author:{role:c.uU.Tool,name:"".concat(e.namespace,".").concat(e.function_name)},content:{content_type:c.PX.Text,parts:[s]},recipient:"all"}]];throw Error("Not implemented")}})})).apply(this,arguments)}function m(e){return!!g(e.domain)}function g(e){return/^localhost:\d+$/.test(e)?"http://".concat(e):/^https?:\/\/localhost:\d+$/.test(e)?e:null}function v(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var n,t,r,a,o,c;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(e+"/.well-known/ai-plugin.json")];case 1:return[4,i.sent().json()];case 2:return t=i.sent(),[3,4];case 3:return i.sent(),l.m.danger("Failed to fetch localhost manifest. Check to ensure your localhost is running and your localhost server has CORS enabled."),[2];case 4:if(null==(r=null==t?void 0:null===(n=t.api)||void 0===n?void 0:n.url))return l.m.danger("Localhost manifest is missing OpenAPI spec URL."),[2];if("pathname"===(a=function(e){try{return new URL(e),"full url"}catch(n){if(e.startsWith("/"))return"pathname";return"neither"}}(r)))r=e+r;else if("neither"===a)return l.m.danger("Localhost manifest OpenAPI spec URL is not a valid URL or path."),[2];i.label=5;case 5:return i.trys.push([5,8,,9]),[4,fetch(r)];case 6:return[4,i.sent().text()];case 7:return o=i.sent(),[3,9];case 8:return i.sent(),l.m.danger("Failed to fetch localhost OpenAPI spec."),[2];case 9:try{c=s.ZP.parse(o)}catch(e){}try{c=JSON.parse(o)}catch(e){}if(null==c)return l.m.danger("Failed to parse localhost OpenAPI spec as JSON or YAML."),[2];i.label=10;case 10:return i.trys.push([10,12,,13]),[4,u.ZP.createOrUpdateLocalhostPlugin({localhost:e,manifest:t,openapiSpec:c})];case 11:return[2,i.sent()];case 12:return i.sent(),l.m.danger("Failed to create or update localhost plugin at ".concat(e)),[3,13];case 13:return[2]}})})).apply(this,arguments)}},35101:function(e,n,t){t.d(n,{V:function(){return c},Z:function(){return u}});var r=t(81949),a=t(5268),i=t(62509),o=t(68053),s=t(54118),c=["approvedAip"];function u(e){var n=e.category,t=e.search,u=e.offset,l=e.limit,d=(0,i.kP)(),f=d.session,p=d.isAuthenticated,h=(0,s.Fl)().isPluginsAvailable;return(0,a.a)((0,r._)(c).concat([{category:n,search:t},{limit:l,offset:u}]),function(){return o.ZP.getApprovedPlugins({offset:u,limit:l,category:n,search:t,accessToken:null==f?void 0:f.accessToken})},{enabled:h&&p,keepPreviousData:!0,onError:function(e){console.error(e)}})}},85330:function(e,n,t){t.d(n,{dT:function(){return v},hZ:function(){return l},iO:function(){return d},p0:function(){return g},wu:function(){return x}});var r=t(81949),a=t(70079),i=t(78103),o=t(6948),s=t(75641),c=t(78931),u=t(14444),l=3,d=[["www.klarna.com","server.shop.app"],["apim.expedia.com","kayak.com"],["www.redfin.com","plugins.zillow.com"],["instacart.com","api.tasty.co"]],f="oai/enabledPluginIds";function p(e){var n=e.currentWorkspace;return(null==n?void 0:n.id)!=null&&(null==n?void 0:n.structure)==s.CZ.WORKSPACE?"".concat(f,"/").concat(n.id):f}function h(e){var n=Array.from(new Set(o.m.getItem(p(e))));return{enabledPluginIds:new Set(n.splice(0,l))}}var m=(0,i.ZP)(function(){return h(c.ec.getState())});function g(){var e=(0,u.C)().installedPlugins,n=m().enabledPluginIds;return(0,a.useMemo)(function(){return e.filter(function(e){return n.has(e.id)})},[n,e])}function v(e){e.length>l||m.setState(function(){return o.m.setItem(p(c.ec.getState()),e),{enabledPluginIds:new Set(e)}})}function x(e){m.setState(function(n){if(n.enabledPluginIds.size>=l)return n;var t=(0,r._)(n.enabledPluginIds).concat([e]);return o.m.setItem(p(c.ec.getState()),t),{enabledPluginIds:new Set(t)}})}c.ec.subscribe(function(e){m.setState(h(e))})},14444:function(e,n,t){t.d(n,{C:function(){return u},Z:function(){return c}});var r=t(5268),a=t(70079),i=t(62509),o=t(68053),s=t(54118),c=["installedAip"];function u(){var e=(0,i.kP)(),n=e.session,t=e.isAuthenticated,u=(0,s.Fl)().isPluginsAvailable,l=(0,r.a)(c,function(){return o.ZP.getPlugins({offset:0,limit:250,isInstalled:!0,accessToken:null==n?void 0:n.accessToken})},{enabled:u&&t,onError:function(e){console.error(e)}}),d=l.data,f=l.isLoading;return(0,a.useMemo)(function(){return{installedPlugins:d?d.items:[],isLoading:f}},[d,f])}},56817:function(e,n,t){t.d(n,{Zr:function(){return i},_4:function(){return o},m1:function(){return a},ti:function(){return r}});var r="https://help.openai.com/en/collections/3943089-billing",a="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",i="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",o={WEBAPP:"chatgpt_web",MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android",GRANTED:"chatgpt_gratis_recepient",NOT_PURCHASED:"chatgpt_not_purchased"}},70293:function(e,n,t){t.d(n,{fv:function(){return C},ZP:function(){return N},Ub:function(){return S}});var r=t(39324),a=t(22830),i=t(4337),o=t(35250),s=t(70079),c=t(1454),u=t(32004),l=t(70671),d=t(94968),f=t(21389),p=t(11084),h=t(37334),m=t(78931),g=t(52787),v=t(67273),x=t(28512),b=t(89368),y=t(98359),_=t(20525);function w(e){var n=e.children,t=e.sidebarOpen,r=e.onClose;return(0,o.jsx)(y.u.Root,{show:t,as:s.Fragment,children:(0,o.jsxs)(_.V,{as:"div",className:"relative z-10",onClose:r,children:[(0,o.jsx)("div",{className:"fixed inset-0"}),(0,o.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,o.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,o.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,o.jsx)(y.u.Child,{as:s.Fragment,enter:"transform transition ease-in-out duration-100 sm:duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300 sm:duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,o.jsx)(_.V.Panel,{className:"pointer-events-auto w-screen max-w-md border-l border-gray-100 dark:border-gray-700",children:(0,o.jsx)("div",{className:"h-full overflow-y-auto bg-white shadow-xl dark:bg-gray-800",children:n})})})})})})]})})}function j(){var e=(0,i._)(["overflow-y-auto h-full md:w-[250px] lg:w-[300px] xl:w-[350px] 2xl:w-[400px] md:border-l md:border-gray-100 md:dark:border-gray-700 bg-white dark:bg-gray-900"]);return j=function(){return e},e}function k(){var e=(0,i._)(["whitespace-pre-wrap text-sm"]);return k=function(){return e},e}function P(){var e=(0,i._)(["px-6 py-4 flex flex-col gap-1 hover:bg-gray-50 dark:hover:bg-gray-500/10 cursor-pointer border-b dark:border-white/10 border-gray-200"]);return P=function(){return e},e}function N(e){var n=e.children,t=e.title,a=e.icon,i=e.isOpen,s=e.slideOver,l=e.onClose,d=(0,o.jsxs)(I,{children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 text-lg font-medium text-gray-900 dark:text-white",children:[(0,o.jsx)(a,{className:"icon-sm"}),t]}),(0,o.jsx)("div",{className:"mr-2 mt-2 flex h-7 items-center",children:(0,o.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:l,children:[(0,o.jsx)("span",{className:"sr-only",children:(0,o.jsx)(u.Z,(0,r._)({},O.closeSidebar))}),(0,o.jsx)(c.q5L,{className:"icon-lg","aria-hidden":"true"})]})})]}),n]});return s?(0,o.jsx)(w,{sidebarOpen:i,onClose:l,children:d}):i?d:null}function C(e){var n=e.clientThreadId,t=e.isOpen,r=e.slideOver,i=e.onClose,u=(0,l.Z)(),d=h.tQ.getThreadCurrentLeafId(n),f=(0,h.u9)(n,d),v=(0,a._)((0,s.useState)(),2),y=v[0],_=v[1],w=(0,m.hz)(),j=(0,s.useCallback)(function(){_(void 0)},[]),k=(0,s.useCallback)(function(){var e=h.tQ.getTree(n);(0,p.S)(e.getTextFromThread(d))},[d,n]);if(!w.has("debug"))return null;var P=f.map(function(e,n){var t=e.author,r=t.role,a=t.name;return(0,o.jsxs)(A,{role:"button",onClick:function(){return _(n)},children:[(0,o.jsxs)("div",{className:"text-xs font-medium uppercase text-gray-400",children:[r,a&&a!==r&&" (".concat(a,")")," -> ",(0,g.Ej)(e)]}),(0,o.jsx)("div",{children:(0,g.RR)(e)})]},e.id)});return(0,o.jsxs)(N,{icon:c.cDN,title:u.formatMessage(O.debugTitle),isOpen:t,slideOver:r,onClose:i,children:[(0,o.jsxs)("div",{className:"flex items-center justify-around gap-2 px-4 py-1 text-xs font-medium uppercase ",children:[(0,o.jsx)(T,{clientThreadId:n,messages:f}),(0,o.jsx)("div",{children:(0,o.jsx)(x.Z,{onCopy:k,buttonText:u.formatMessage(O.copyText)})})]}),(0,o.jsx)(Z,{children:P}),void 0!==y&&(0,o.jsx)(b.Z,{isOpen:!0,onClose:j,type:"success",children:(0,o.jsx)("pre",{className:"max-h-[80vh] overflow-auto whitespace-pre-wrap text-xs",children:JSON.stringify(f[y],null,2)})},"DebugMessageModal-".concat(y))]})}function S(e,n){var t=JSON.stringify(n)+"\n",r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download="messages-".concat(h.tQ.getServerThreadId(e),".jsonl"),i.click(),URL.revokeObjectURL(a)}function T(e){var n=e.clientThreadId,t=e.messages,a=(0,s.useCallback)(function(){S(n,t)},[n,t]);return(0,o.jsxs)(v.z,{onClick:a,color:"dark",size:"small",children:[(0,o.jsx)(c._hL,{className:"icon-sm"}),(0,o.jsx)(u.Z,(0,r._)({},O.downloadRawConversation))]})}var I=f.Z.div(j()),Z=f.Z.pre(k()),A=f.Z.div(P()),O=(0,d.vU)({debugTitle:{id:"DebugSidebar.debugTitle",description:"Title of the Debug sidebar",defaultMessage:"Debug"},copyText:{id:"DebugSidebar.copyText",description:"Button text to copy the content to clipboard",defaultMessage:"Copy text"},downloadRawConversation:{id:"DebugSidebar.downloadRawConversation",description:"Button text to download raw conversation",defaultMessage:"Download raw conversation"},closeSidebar:{id:"DebugSidebar.closeSidebar",description:"Aria-label for the close sidebar button",defaultMessage:"Close sidebar"}})},66085:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){return"/c/".concat(e)}},19012:function(e,n,t){var r=t(70079);n.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),(0,r.useCallback)(function(){return e.current},[])}},87389:function(e,n,t){t.d(n,{S:function(){return f}});var r=t(21722),a=t(39324),i=t(22830),o=t(75883),s=t(12155),c=t(60554),u=t(70079),l=t(62509),d=t(68053);function f(){var e,n,t=(0,c.useRouter)(),f=(0,l.kP)().session,p=(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.idp)==="auth0",h=!!(null==f?void 0:null===(n=f.user)||void 0===n?void 0:n.mfa),m=(0,i._)((0,u.useState)(!1),2),g=m[0],v=m[1],x=(0,u.useCallback)((0,r._)(function(){var e;return(0,o.Jh)(this,function(n){if(e=new URL(t.asPath,window.location.origin).toString(),!p)throw Error("Only username/password users can enable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return(0,s.signIn)(f.authProvider,{callbackUrl:e},(0,a._)({prompt:"login"},f.authProvider===l.Ho.OpenAI?{login_hint:(0,l.W_)({oai_enforce_mfa:!0,idp:"openai"})}:{oai_enforce_mfa:"true"})),[2]})}),[t.asPath,f,p]),b=(0,u.useCallback)((0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!p)throw Error("Only username/password users can disable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return v(!0),[4,d.ZP.deleteMfa()];case 1:return n.sent(),[4,(0,s.signOut)({redirect:!1,callbackUrl:"/auth/login?next=".concat(encodeURIComponent(t.asPath))})];case 2:return e=n.sent(),v(!1),t.push(e.url),[2]}})}),[p,t,f]);return{setupMfa:x,isUsernamePassword:p,isLoggedInWithMfa:h,removeMfa:b,isLoading:g}}}}]);